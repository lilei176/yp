{"remainingRequest":"C:\\xampp\\htdocs\\LL\\vue-UI\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\xampp\\htdocs\\LL\\vue-UI\\vue_app_00\\src\\components\\xz\\common\\Cart.vue?vue&type=style&index=0&lang=css","dependencies":[{"path":"C:\\xampp\\htdocs\\LL\\vue-UI\\vue_app_00\\src\\components\\xz\\common\\Cart.vue","mtime":1559268989527},{"path":"C:\\xampp\\htdocs\\LL\\vue-UI\\vue_app_00\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"C:\\xampp\\htdocs\\LL\\vue-UI\\vue_app_00\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1521907988000},{"path":"C:\\xampp\\htdocs\\LL\\vue-UI\\vue_app_00\\node_modules\\postcss-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\xampp\\htdocs\\LL\\vue-UI\\vue_app_00\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1534853416000},{"path":"C:\\xampp\\htdocs\\LL\\vue-UI\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js","mtime":1527860006000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.cart-item{\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.leftImgTxt{\n  display: flex;\n  align-items: center;\n}\n.leftImgTxt>img{\n  width: 50px;\n  height: 50px;\n}\n.rightImg{\n  display: flex;\n  margin-left: 30px;\n align-items: center;\n}\n",{"version":3,"sources":["Cart.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Cart.vue","sourceRoot":"src\\components\\xz\\common","sourcesContent":["<template>\r\n  <div class=\"cart\">\r\n    <!-- 全选按钮 -->\r\n    <div class=\"selectAll\">\r\n      \r\n      <input type=\"checkbox\" @change=\"selectAll\" v-model=\"bool\">全选\r\n    </div>\r\n    <!-- 购物车商品信息 -->\r\n    <div class=\"cart-item\" v-for=\"(elem,i) of list\" :key=\"i\" >\r\n      <div class=\"leftImgTxt\" >\r\n         <input type=\"checkbox\" v-model=\"elem.cb\" @click=\"checkeditem\" > <!--:checked=\"bool\" -->\r\n        <img :src=\"`http://127.0.0.1:3000/${elem.img}`\" alt=\"\">\r\n        <div class=\"rightImg\">\r\n          <span>{{elem.price}}</span>\r\n          <span>{{elem.count}}</span>\r\n          <span>{{elem.title}}</span>\r\n          <!-- <div> \r\n            <mt-button>-</mt-button>\r\n            <span>1</span>\r\n            <mt-button>+</mt-button>\r\n          </div>-->\r\n        </div>\r\n      </div>\r\n      <mt-button @click=\"delitem\" :data-id=\"elem.id\">删除</mt-button>\r\n    </div>\r\n    <!-- 删除选中商品 -->\r\n    <div class=\"delAll\">\r\n      <mt-button @click=\"delchecked\">删除选中商品</mt-button>\r\n      <mt-button @click=\"delAll\">清空购物车</mt-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  data(){\r\n    return{\r\n      list:[],\r\n      bool:\"\"\r\n    }\r\n  },\r\n  methods:{\r\n    load(){\r\n      //加载购物车数据\r\n      //创建url \r\n      //发送ajax请求\r\n      //获取服务器购物车数据\r\n      //保存 \r\n      this.axios.get(\"cart\").then(result=>{\r\n        //1.获取数组\r\n        //2.创建循环为数组中元素添加cb属性\r\n        //3.将修改后的数据赋值给list\r\n        var arr=result.data.data\r\n        for(var elem of arr){\r\n          elem.cb=false;\r\n        }\r\n        this.list=arr;\r\n        //this.list=result.data.data;\r\n      })\r\n    },\r\n    delitem(e){    //删除购物车中指定商品 \r\n      //获取当前商品id\r\n      this.$messagebox({\r\n        title:\"消息\",\r\n        message:\"是否删除该商品\",\r\n        showConfirmButton:true,\r\n        showCancelButton:true\r\n      }).then(result=>{\r\n        //console.log(result);\r\n        if(result==\"cancel\"){\r\n          return;\r\n        }else{\r\n\r\n          var id=e.target.dataset.id\r\n      //发送ajax请求\r\n          this.axios.get(\"del\",{params:{id}}).then(result=>{\r\n          this.$toast(result.data.msg);\r\n          this.load();\r\n      //刷新 \r\n      }) \r\n      }  \r\n      })\r\n    },\r\n    selectAll(e){\r\n      //获取当前全选按钮状态\r\n      //this.bool=e.target.checked;\r\n      for(var elem of this.list){\r\n        elem.cb=e.target.checked;\r\n      } \r\n    },\r\n    delAll(e){\r\n      //清空购物车中所有商品\r\n      //创建变量保存空字符串\r\n      //循环遍历数组\r\n      //获取当前id  拼接字符串\r\n      //发送ajax请求获取数据\r\n      var str=\"\";\r\n      for(var elem of this.list){\r\n        str+=elem.id+\",\";\r\n      }\r\n      if(str.length==0){\r\n        this.$messagebox(\"提示\",\"请选中要删除的数据\");\r\n        return;\r\n      }\r\n      str=str.substring(0,str.length-1);\r\n      this.del(str)\r\n     \r\n      },\r\n      delchecked(){      //删除选中\r\n        var str=\"\";\r\n        for(var elem of this.list){   \r\n          if(elem.cb){\r\n            str+=elem.id+\",\"\r\n          }\r\n        }\r\n        if(str.length==0){\r\n        this.$messagebox(\"提示\",\"请选中要删除的数据\");\r\n        return;\r\n      }\r\n        str=str.substring(0,str.length-1);\r\n         this.del(str)\r\n      },\r\n      del(str){\r\n        this.$messagebox({\r\n        title:\"消息\",\r\n        message:\"是否删除选中商品\",\r\n        showConfirmButton:true,\r\n        showCancelButton:true\r\n      }).then(result=>{\r\n        //console.log(result);\r\n        if(result==\"cancel\"){\r\n          return;\r\n        }else{\r\n      //发送ajax请求\r\n          this.axios.get(\"delall\",{params:{str}}).then(result=>{\r\n          this.$toast(result.msg);\r\n          this.load();\r\n      //刷新 \r\n      }) \r\n      }  \r\n      })\r\n      },\r\n      checkeditem(e){\r\n        var n=0;\r\n        if(e.target.checked==false){\r\n          this.bool=false;\r\n        }else{\r\n          for(var elem of this.list){\r\n            //console.log(elem);\r\n              if(elem.cb){\r\n                n++;\r\n                //console.log(n)\r\n              }      \r\n          } \r\n          if(n==this.list.length-1){\r\n            this.bool=true;\r\n          }\r\n        }\r\n      }\r\n    \r\n  },\r\n  created(){\r\n    this.load();  \r\n  },\r\n  \r\n}\r\n</script>\r\n<style>\r\n  .cart-item{\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n  }\r\n  .leftImgTxt{\r\n    display: flex;\r\n    align-items: center;\r\n  }\r\n  .leftImgTxt>img{\r\n    width: 50px;\r\n    height: 50px;\r\n  }\r\n  .rightImg{\r\n    display: flex;\r\n    margin-left: 30px;\r\n   align-items: center;\r\n  }\r\n</style>\r\n"]}]}